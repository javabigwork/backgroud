<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ctgu.javakeshe.dao.BookDao">

    <resultMap type="com.ctgu.javakeshe.entity.Book" id="bookResultMap">
        <id property="isbn" column="isbn"/>
        <result property="bookTitle" column="book_title" />
        <result property="bookName" column="book_name" />
        <result property="bookAuthor" column="book_author" />
        <result property="bookOldPrice" column="book_old_price" />
        <result property="bookNewPrice" column="book_new_price" />
        <result property="bookDiscount" column="book_discount" />
        <result property="bookCategoryId" column="book_category_id" />
        <result property="bookStock" column="book_stock" />
        <result property="bookContent" column="book_content" />
        <result property="bookSalesVolume" column="book_sales_volume" />

        <collection property="bookImgList" javaType="list" ofType="com.ctgu.javakeshe.entity.BookImg">
            <id property="id" column="id"/>
            <result property="isbn" column="isbn"/>
            <result property="url" column="url"/>
            <result property="sort" column="sort"/>
        </collection>
    </resultMap>



    <select id="selectAll" resultMap="bookResultMap">
        select
        b.isbn,
        b.book_title,
        b.book_name,
        b.book_author,
        b.book_old_price,
        b.book_new_price,
        b.book_discount,
        b.book_category_id,
        b.book_stock,
        b.book_content,
        b.book_sales_volume,
        bi.url,
        bi.sort
        from book b inner join book_img bi
        on b.isbn = bi.isbn
    </select>

</mapper>